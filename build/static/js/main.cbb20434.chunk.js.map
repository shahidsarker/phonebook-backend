{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","value","onChange","PersonForm","nameInput","onNameChange","numberInput","onNumberChange","onAdd","type","onClick","Person","person","onDelete","name","number","Persons","props","persons","map","key","id","baseUrl","axios","get","then","response","data","newObj","post","delete","put","Notification","message","className","text","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","setMessage","useEffect","personsService","initialPersons","catch","err","console","log","displayPersons","toLowerCase","includes","e","target","preventDefault","find","window","confirm","p","updatedPerson","returnedPerson","setTimeout","concat","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cbb20434.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ value, onChange }) => (\n  <div>\n    filter shown with <input value={value} onChange={onChange} />\n  </div>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  nameInput,\n  onNameChange,\n  numberInput,\n  onNumberChange,\n  onAdd,\n}) => (\n  <form>\n    <div>\n      name: <input value={nameInput} onChange={onNameChange} />\n    </div>\n    <div>\n      number: <input value={numberInput} onChange={onNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\" onClick={onAdd}>\n        add\n      </button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ person, onDelete }) => (\n  <p>\n    {person.name} {person.number} <button onClick={onDelete}>delete</button>\n  </p>\n);\n\nconst Persons = (props) => {\n  // return ({props.persons.map((person) =>   <Person key={person.name} person={person}/>\n  // )})\n\n  return props.persons.map((person) => (\n    <Person\n      key={person.id}\n      person={person}\n      onDelete={() => props.onDelete(person)}\n    />\n  ));\n};\n\nexport default Persons;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\n// axios.get(\"http://localhost:3001/persons\").then((response) => {\n//       setPersons(response.data);\n//     });\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObj) => {\n  const request = axios.post(baseUrl, newObj);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response);\n};\n\nconst update = (id, newObj) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObj);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, remove, update };\n","import React from \"react\";\n\nconst Notification = ({ message }) => {\n  if (message === null) return null;\n  return <div className={message.type}>{message.text}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\n\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\n\nimport personsService from \"./services/persons\";\n\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [message, setMessage] = useState(null);\n\n  const hook = () => {\n    personsService\n      .getAll()\n      .then((initialPersons) => {\n        setPersons(initialPersons);\n      })\n      .catch((err) => console.log(err));\n  };\n  useEffect(hook, []);\n\n  const handleAdd = (e) => {\n    e.preventDefault();\n\n    // Check if name is already in phonebook\n    if (persons.find((person) => person.name === newName)) {\n      if (\n        window.confirm(\n          `${newName} is already in phonebook, replace with new number?`\n        )\n      ) {\n        const person = persons.find((p) => p.name === newName);\n        const updatedPerson = { ...person, number: newNumber };\n        return personsService\n          .update(person.id, updatedPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== returnedPerson.id ? person : returnedPerson\n              )\n            );\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setMessage({\n              text: `Updated ${returnedPerson.name}`,\n              type: \"success\",\n            });\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          });\n      }\n    }\n\n    const personObj = { name: newName, number: newNumber };\n    personsService\n      .create(personObj)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setMessage({ text: `Added ${returnedPerson.name}`, type: \"success\" });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      })\n      .catch((err) => {\n        const { error: text } = err.response.data;\n        setMessage({ text, type: \"error\" });\n      });\n  };\n\n  const handleDelete = (person) => {\n    if (window.confirm(`Do you really want to delete ${person.name}?`)) {\n      personsService\n        .remove(person.id)\n        .then((response) => {\n          setPersons(persons.filter((p) => p.id !== person.id));\n          setMessage({\n            text: `${person.name} has been removed`,\n            type: \"warning\",\n          });\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((err) => {\n          console.log(err);\n          setMessage({\n            text: `${person.name} has already been removed from the server`,\n            type: \"error\",\n          });\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => setNewNumber(e.target.value);\n\n  const handleFilterChange = (e) => {\n    setFilter(e.target.value);\n  };\n\n  const displayPersons =\n    filter === \"\"\n      ? persons\n      : persons.filter((person) => person.name.toLowerCase().includes(filter));\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter value={filter} onChange={handleFilterChange} />\n\n      <h3>Add a new person</h3>\n      <PersonForm\n        nameInput={newName}\n        onNameChange={handleNameChange}\n        numberInput={newNumber}\n        onNumberChange={handleNumberChange}\n        onAdd={handleAdd}\n      />\n\n      <h3>Numbers</h3>\n\n      <Persons persons={displayPersons} onDelete={handleDelete} />\n\n      <code>\n        <hr />\n        debug:\n        <div>newName:{newName}</div>\n        <div>newNumber: {newNumber}</div>\n        <div>filter: {filter}</div>\n      </code>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}